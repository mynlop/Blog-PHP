{% extends 'layout.twig' %}

{% block content %}
    <h2>New Post</h2>
    <p>
        <a class="btn btn-default" href="{{ 'admin/posts' | url }}">Back</a>
    </p>
    {% if errors %}
        {% include('partials/errors.twig') %}
    {% endif %}
    {% if result %}
        <div class="alert alert-success">Post Saved!!</div>
    {% endif %}
    <form method="post" onsubmit="return validateForm()">
        <div class="form-group">
            <label for="txtTitle">Title</label>
            <input type="text" name='txtTitle' id='txtTitle' class="form-control">
        </div>
        <div class="form-group">
            <label for="txtImg">Image</label>
            <input type="text" name='txtImg' id='txtImg' class="form-control">
        </div>
        <textarea class="form-control" name="txtContent" id="txtContent" rows="5"></textarea>
        <br>
        <input type="submit" value="Save" class="btn btn-primary">
    </form>
{% endblock %}

{% block js %}
    <script>
        function validateForm(){
            let title = document.getElementById('txtTitle').value.trim()
            let content = document.getElementById('txtContent').value.trim()
            if(title === ''){
                swal(
                    'Oops...',
                    'Title is required!',
                    'error'
                )
                return false;
            }else if(content === ''){
                swal(
                    'Oops...',
                    'Content is required!',
                    'error'
                )
                return false
            }
        }
    </script>
{% endblock %}
